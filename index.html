<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="å­œå­œä¸å€¦">
<meta property="og:type" content="website">
<meta property="og:title" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="å­œå­œä¸å€¦">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
<meta name="twitter:description" content="å­œå­œä¸å€¦">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'åšä¸»'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>niuxianbinçš„æŠ€æœ¯åšå®¢</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">niuxianbinçš„æŠ€æœ¯åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">å­¦æµ·æ— æ¶¯</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            é¦–é¡µ
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            å½’æ¡£
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/15/é¢„é˜²crashä¹‹unrecognized selector/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/15/é¢„é˜²crashä¹‹unrecognized selector/" itemprop="url">é¢„é˜²crashä¹‹unrecognized selector</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-05-15T20:33:43+08:00">
                2017-05-15
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="unrecognized-selectoråŸå› åˆ†æ"><a href="#unrecognized-selectoråŸå› åˆ†æ" class="headerlink" title="unrecognized selectoråŸå› åˆ†æ"></a>unrecognized selectoråŸå› åˆ†æ</h2><p>Appçš„å´©æºƒåŸå› æœ‰å¾ˆå¤šç§ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦é˜è¿°é˜²æ­¢å‘é€æœªçŸ¥æ¶ˆæ¯(unrecognized selector)å¼•èµ·crashçš„é—®é¢˜ã€‚ç®€å•æ¥è¯´unrecognized selectorç±»å‹çš„crashæ˜¯å› ä¸ºä¸€ä¸ªå¯¹è±¡è°ƒç”¨äº†ä¸€ä¸ªä¸å±äºå®ƒçš„æ–¹æ³•å¯¼è‡´çš„,</p>
<h2 id="è§£å†³æ–¹æ¡ˆåˆ†æ"><a href="#è§£å†³æ–¹æ¡ˆåˆ†æ" class="headerlink" title="è§£å†³æ–¹æ¡ˆåˆ†æ"></a>è§£å†³æ–¹æ¡ˆåˆ†æ</h2><p><img src="/img/0321.jpeg" alt=""><br>ä¸Šå›¾æ˜¯OCç»å…¸çš„æ¶ˆæ¯è½¬å‘æœºåˆ¶ï¼Œåœ¨OCçš„æ–¹æ³•è°ƒç”¨ä¸­ï¼Œé€šè¿‡superclassæŒ‡é’ˆé€çº§å‘ä¸ŠæŸ¥æ‰¾è¯¥æ¶ˆæ¯æ‰€å¯¹åº”çš„æ–¹æ³•å®ç°ã€‚å¦‚æœç›´åˆ°æ ¹ç±»éƒ½æ²¡æœ‰æ‰¾åˆ°è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œå°±ä¼šå‡ºå‘æ¶ˆæ¯è½¬å‘ï¼Œå¦‚ä¸Šå›¾ï¼Œæ‰€ä»¥å¯ä»¥ä»ä»¥ä¸Šä¸‰ä¸ªæ–¹æ³•ä¸­å®ç°åŠ¨æ€å¤„ç†unrecognized selectorçš„å¼‚å¸¸</p>
<h2 id="æ–¹æ¡ˆ1-é‡å†™NSObjectçš„forwardingTargetForSelector"><a href="#æ–¹æ¡ˆ1-é‡å†™NSObjectçš„forwardingTargetForSelector" class="headerlink" title="æ–¹æ¡ˆ1:é‡å†™NSObjectçš„forwardingTargetForSelector"></a>æ–¹æ¡ˆ1:é‡å†™NSObjectçš„forwardingTargetForSelector</h2><p>ğŸğŸ æ€è·¯ï¼š</p>
<ul>
<li>NSObjectæ·»åŠ åˆ†ç±»ï¼Œé‡å†™forwardingTargetForSelector</li>
<li>åŠ¨æ€åˆ›å»ºProtectorç±»ï¼Œåœ¨forwardingTargetForSelectoræ–¹æ³•ä¸­æˆªè·æœªå®ç°çš„æ–¹æ³•ï¼Œè½¬å‘ç»™Protectorã€‚å¹¶ä¸ºProtector åŠ¨æ€çš„æ·»åŠ æœªå®ç°çš„æ–¹æ³•</li>
<li>åŠ¨æ€ç»™Protectorç±»æ·»åŠ æ–¹æ³•å®ç°ï¼Œ</li>
</ul>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"NSObject+Protector.h"</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;objc/message.h&gt;</span></span></span><br><span class="line"><span class="meta">#import <span class="meta-string">&lt;objc/runtime.h&gt;</span></span></span><br><span class="line"><span class="meta">#pragma clang diagnostic push</span></span><br><span class="line"><span class="meta">#pragma clang diagnostic ignored <span class="meta-string">"-Wobjc-protocol-method-implementation"</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">NSObject</span> (<span class="title">Protector</span>)</span></span><br><span class="line"></span><br><span class="line">-(<span class="keyword">id</span>)forwardingTargetForSelector:(SEL)aSelector&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> ([[<span class="keyword">self</span> <span class="keyword">class</span>] isSubclassInWhiteListClass])</span><br><span class="line">    &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSString</span> *className = <span class="string">@"ProtectorDynamicClass"</span>;</span><br><span class="line">        Class protocalClass = objc_lookUpClass(className.UTF8String);</span><br><span class="line">        <span class="keyword">if</span> (!protocalClass)</span><br><span class="line">        &#123;</span><br><span class="line">            protocalClass =  objc_allocateClassPair([<span class="built_in">NSObject</span> <span class="keyword">class</span>], className.UTF8String, <span class="number">0</span>);</span><br><span class="line">            objc_registerClassPair(protocalClass);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//æ­¤å¤„å¯ä¸ç”¨åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (![protocalClass isEXit:aSelector]) &#123;</span><br><span class="line">             class_addMethod(protocalClass, aSelector, [protocalClass getIMP], <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">        [<span class="keyword">self</span> warningDeveloper:aSelector];</span><br><span class="line">        <span class="keyword">return</span> [[protocalClass alloc]init];</span><br><span class="line">        </span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#pragma clang diagnostic pop</span></span><br><span class="line"></span><br><span class="line">+(IMP)getIMP&#123;</span><br><span class="line">    <span class="keyword">return</span> imp_implementationWithBlock(^()&#123;</span><br><span class="line">        <span class="built_in">NSLog</span>(<span class="string">@"PROTECTOR: add IMP Done"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">+(<span class="built_in">BOOL</span>)isEXit:(SEL)sel &#123;</span><br><span class="line">    <span class="built_in">BOOL</span> isExit = <span class="literal">NO</span>;</span><br><span class="line">    <span class="keyword">unsigned</span> <span class="keyword">int</span> methodCount = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">NSString</span> *selName = <span class="built_in">NSStringFromSelector</span>(sel);</span><br><span class="line">    Method *methodList = class_copyMethodList([<span class="keyword">self</span> <span class="keyword">class</span>], &amp;methodCount);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; methodCount; i++) &#123;</span><br><span class="line">        Method currentMethod = methodList[i];</span><br><span class="line">        SEL currentSEL  =  method_getName(currentMethod);</span><br><span class="line">        <span class="keyword">if</span> ([selName isEqualToString:<span class="built_in">NSStringFromSelector</span>(currentSEL)]) &#123;</span><br><span class="line">            isExit = <span class="literal">YES</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//éœ€è¦æ‰‹åŠ¨é‡Šæ”¾</span></span><br><span class="line">    free(methodList);</span><br><span class="line">    <span class="keyword">return</span> isExit;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">BOOL</span>)isSubclassInWhiteListClass&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">NSArray</span> *classNameArray = @[<span class="string">@"NSNull"</span>,<span class="string">@"UIResponder"</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *className <span class="keyword">in</span> classNameArray) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([<span class="keyword">self</span> isSubclassOfClass:<span class="built_in">NSClassFromString</span>(className)]) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)warningDeveloper:(SEL)aSelector&#123;</span><br><span class="line"><span class="meta">#if DEBUG</span></span><br><span class="line">    <span class="built_in">NSString</span> *selectorStr = <span class="built_in">NSStringFromSelector</span>(aSelector);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"PROTECTOR: -[%@ %@]"</span>, [<span class="keyword">self</span> <span class="keyword">class</span>], selectorStr);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"PROTECTOR: unrecognized selector \"%@\" sent to instance: %p"</span>, selectorStr, <span class="keyword">self</span>);</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@"PROTECTOR: call stack: %@"</span>, [<span class="built_in">NSThread</span> callStackSymbols]);</span><br><span class="line"><span class="meta">#endif</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ–¹æ¡ˆ2-é‡å†™NSObjectçš„methodSignatureForSelector"><a href="#æ–¹æ¡ˆ2-é‡å†™NSObjectçš„methodSignatureForSelector" class="headerlink" title="æ–¹æ¡ˆ2:é‡å†™NSObjectçš„methodSignatureForSelector"></a>æ–¹æ¡ˆ2:é‡å†™NSObjectçš„methodSignatureForSelector</h2><p>ğŸğŸ æ€è·¯ï¼š</p>
<ul>
<li>NSObjectæ·»åŠ åˆ†ç±»ï¼Œé‡å†™methodSignatureForSelector</li>
<li>æ£€æŸ¥æ˜¯å¦åœ¨ç™½åå•å†…ï¼Œåœ¨çš„è¯è¿”å›ä¸€ä¸ªç©ºç­¾åï¼Œä»€ä¹ˆä¹Ÿä¸åš</li>
<li>ä¸å†èŒƒå›´å†…ï¼Œè¿”å›åŸæ¥çš„ç­¾åï¼Œèµ°åŸæ¥çš„é€»è¾‘<br>ç¼ºç‚¹ï¼š<br>æ­¤æ–¹æ¡ˆä¼šå’Œåˆ«çš„ä½¿ç”¨AOPçš„ç¬¬ä¸‰æ–¹åº“å†²çªï¼ˆä¾‹å¦‚Aspectsï¼‰ï¼Œå‡ºç°å¥‡è‘©é—®é¢˜ï¼Œå­˜åœ¨ä¼˜åŒ–ç©ºé—´ï¼Œç¬¬ä¸‰ç§æ–¹æ¡ˆçš„æ¥æºã€‚æ­¤å¤„ä»£ç çœç•¥ï¼Œå‚è€ƒæ–¹æ¡ˆ3çš„ä»£ç ã€‚</li>
</ul>
<h2 id="æ–¹æ¡ˆ3-é‡å†™å°‘é‡ç±»çš„methodSignatureForSelector"><a href="#æ–¹æ¡ˆ3-é‡å†™å°‘é‡ç±»çš„methodSignatureForSelector" class="headerlink" title="æ–¹æ¡ˆ3:é‡å†™å°‘é‡ç±»çš„methodSignatureForSelector"></a>æ–¹æ¡ˆ3:é‡å†™å°‘é‡ç±»çš„methodSignatureForSelector</h2><p>ç¬¬ä¸‰æ–¹åº“å¯¹ methodSignatureForSelectorè¿›è¡Œäº†å…¨å±€æ›¿æ¢ï¼Œè€Œæˆ‘ä»¬ä¹Ÿåœ¨NSObjectä¸­ è¿›è¡Œäº†å…¨å±€æ›¿æ¢ï¼Œè¿™å°±æœ‰äº†å†²çªã€‚ç”¨å®å®šä¹‰çš„æ–¹å¼å¯¹å‡ ä¸ªç±»å¤„ç†å³å¯ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"NSString+Protector.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#define ELOANCN_PROTECTOR(_ClassName_)\</span></span><br><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">_ClassName_</span> (<span class="title">ELProtector</span>)\</span></span><br><span class="line">-(<span class="built_in">NSMethodSignature</span> *)methodSignatureForSelector:(SEL)aSelector&#123;\</span><br><span class="line">\</span><br><span class="line"><span class="built_in">NSMethodSignature</span> *signature = [<span class="keyword">super</span> methodSignatureForSelector:aSelector];\</span><br><span class="line"><span class="keyword">if</span> (!signature)\</span><br><span class="line">&#123;\</span><br><span class="line">    <span class="keyword">static</span> <span class="built_in">NSMutableDictionary</span> *signatureCache = <span class="literal">nil</span>;\</span><br><span class="line">    \</span><br><span class="line">    <span class="keyword">if</span> (signatureCache == <span class="literal">nil</span>)\</span><br><span class="line">    &#123;\</span><br><span class="line">        signatureCache = [<span class="built_in">NSMutableDictionary</span> new];\</span><br><span class="line">        \</span><br><span class="line">    &#125;\</span><br><span class="line">    \</span><br><span class="line">    signature = [signatureCache objectForKey:<span class="built_in">NSStringFromSelector</span>(aSelector)];\</span><br><span class="line">    \</span><br><span class="line">    <span class="keyword">if</span> (!signature)\</span><br><span class="line">    &#123;\</span><br><span class="line">        signature = [<span class="built_in">NSMethodSignature</span> signatureWithObjCTypes:<span class="string">"@"</span>];\</span><br><span class="line">        signatureCache[<span class="built_in">NSStringFromSelector</span>(aSelector)] =signature;\</span><br><span class="line">    &#125;\</span><br><span class="line">    \</span><br><span class="line">    \</span><br><span class="line">&#125;\</span><br><span class="line"><span class="built_in">NSLog</span>(<span class="string">@"PROTECTOR: unrecognized selector \"%@\" sent to instance: %p"</span>, <span class="built_in">NSStringFromSelector</span>(aSelector), <span class="keyword">self</span>);\</span><br><span class="line"><span class="keyword">if</span> (TARGET_OS_SIMULATOR)\</span><br><span class="line">&#123;\</span><br><span class="line">    <span class="built_in">NSException</span> *excp = [<span class="built_in">NSException</span> exceptionWithName:<span class="string">@"unrecognized selector"</span> reason:<span class="string">@" unrecognized selector sent to instance"</span> userInfo:<span class="literal">nil</span>];\</span><br><span class="line">    [excp raise];\</span><br><span class="line">&#125;\</span><br><span class="line"><span class="keyword">return</span> signature;\</span><br><span class="line">\</span><br><span class="line">&#125;\</span><br><span class="line"><span class="keyword">@end</span>\</span><br><span class="line"></span><br><span class="line">ELOANCN_PROTECTOR(<span class="built_in">NSString</span>);</span><br><span class="line">ELOANCN_PROTECTOR(<span class="built_in">NSNull</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="é›†æˆè¿›é¡¹ç›®çš„é—®é¢˜"><a href="#é›†æˆè¿›é¡¹ç›®çš„é—®é¢˜" class="headerlink" title="é›†æˆè¿›é¡¹ç›®çš„é—®é¢˜"></a>é›†æˆè¿›é¡¹ç›®çš„é—®é¢˜</h2><ol>
<li>ä¸åŠ ç™½åå•ï¼Œç›´æ¥ç»™NSObjectåˆ†ç±»é‡å†™æ¶ˆæ¯è½¬å‘çš„æ–¹æ³•ï¼Œåœ¨é¡¹ç›®å¯åŠ¨åŠ è½½æ—¶ä¼šæœ‰è«åçš„å¼‚å¸¸æŠ›å‡ºã€‚</li>
<li>é‡å†™çš„å¯¹åº”çš„æ–¹æ³•methodSignatureForSelectorï¼Œé¡¹ç›®çš„ç¬¬ä¸‰æ–¹åº“ä¸­ä¹Ÿå¯èƒ½é‡å†™äº†ï¼Œéœ€è¦è‡ªå·±æ£€æŸ¥å¤„ç†ã€‚</li>
</ol>
<p>æ€è·¯æ¥æºï¼š<a href="https://www.jianshu.com/p/521dd19d4406" target="_blank" rel="noopener">Mad_Mark</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/04/10/é¢„é˜²crashä¹‹åˆ·æ–°UIçº¿ç¨‹æ£€æŸ¥/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/04/10/é¢„é˜²crashä¹‹åˆ·æ–°UIçº¿ç¨‹æ£€æŸ¥/" itemprop="url">é¢„é˜²crashä¹‹åˆ·æ–°UIçº¿ç¨‹æ£€æŸ¥</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-04-10T11:33:43+08:00">
                2017-04-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/02/25/é¢„é˜²crashä¹‹åŸºæœ¬æ•°æ®å®¹é”™æœºåˆ¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/02/25/é¢„é˜²crashä¹‹åŸºæœ¬æ•°æ®å®¹é”™æœºåˆ¶/" itemprop="url">é¢„é˜²crashä¹‹åŸºæœ¬æ•°æ®å®¹é”™æœºåˆ¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-02-25T22:33:43+08:00">
                2017-02-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="åŸºæœ¬æ•°æ®ç±»å¯¼è‡´çš„crash"><a href="#åŸºæœ¬æ•°æ®ç±»å¯¼è‡´çš„crash" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å¯¼è‡´çš„crash"></a>åŸºæœ¬æ•°æ®ç±»å¯¼è‡´çš„crash</h2><p>ä¸€èˆ¬å¯¹äºæ•°ç»„\å­—å…¸ç­‰åŸºæœ¬æ•°æ®ç±»å‹çš„å¢åˆ æ”¹æŸ¥ï¼Œç”±äºæ•°æ®çš„ä¸ç¡®å®šæ€§ï¼Œç»å¸¸ä¼šå¯¼è‡´crashï¼ŒğŸŒ°å¦‚ä¸‹ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *arr = @[@<span class="number">1</span>,@<span class="number">2</span>,@<span class="number">3</span>,@<span class="number">4</span>];</span><br><span class="line"><span class="built_in">NSMutableArray</span> *arrM = @[].mutableCopy;</span><br><span class="line"><span class="built_in">NSDictionary</span> *dic = @&#123;<span class="string">@"test"</span>:<span class="string">@"dic"</span>&#125;;</span><br><span class="line"></span><br><span class="line">[arr objectAtIndex:<span class="number">5</span>];</span><br><span class="line">[arrM addObject:<span class="literal">nil</span>];</span><br><span class="line">[dic objectForKey:<span class="string">@"test1"</span>];</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸Šå‡ ç§æ–¹å¼å°±ä¼šé€ æˆcrashï¼Œ</p>
<h2 id="è§£å†³æ–¹æ¡ˆ"><a href="#è§£å†³æ–¹æ¡ˆ" class="headerlink" title="è§£å†³æ–¹æ¡ˆ"></a>è§£å†³æ–¹æ¡ˆ</h2><p>æ€è·¯å¾ˆç®€å•ï¼Œå¯ä»¥é€šè¿‡swizzleçš„æ–¹å¼hookå¢åˆ æ”¹æŸ¥çš„æ–¹æ³•ï¼Œæ‰§è¡Œè‡ªå®šä¹‰çš„å¯¹åº”çš„å¢åˆ æ”¹æŸ¥æ–¹æ³•ï¼Œåœ¨è‡ªå®šä¹‰çš„æ–¹æ³•ä¸­è¿›è¡Œæœ¬æ•°æ®ç±»å‹çš„å®‰å…¨æ£€æŸ¥ã€‚å³å¯å¯¹åŸºæœ¬ç±»å‹ä½œå‡ºå®¹é”™ã€‚æˆ‘ä»¬æ—©æœŸçš„é¡¹ç›®ç¿¼é¾™è´·ç†è´¢ç«¯å°±æ˜¯è¿™ä¸ªæ€è·¯ï¼Œç»™NSArray\ NSMutableArray\ NSDictionaryç­‰åŠ Category,hookå¯¹åº”çš„æ–¹æ³•ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">+ (<span class="keyword">void</span>)exchangeAddObjectMethod&#123;</span><br><span class="line">    </span><br><span class="line">    [objc_getClass(<span class="string">"__NSArrayM"</span>) swizzleSelector:<span class="keyword">@selector</span>(addObject:) withSwizzledSelector:<span class="keyword">@selector</span>(safeAddObject:)];</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">- (<span class="keyword">void</span>)safeAddObject:(<span class="keyword">id</span>)obj &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj == <span class="literal">nil</span>) &#123;</span><br><span class="line">        <span class="built_in">NSAssert</span>(obj != <span class="literal">nil</span>, <span class="string">@"add nil object into NSMutableArray"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        [<span class="keyword">self</span> safeAddObject:obj];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®Œç¾è§£å†³æ–¹æ¡ˆ"><a href="#å®Œç¾è§£å†³æ–¹æ¡ˆ" class="headerlink" title="å®Œç¾è§£å†³æ–¹æ¡ˆ"></a>å®Œç¾è§£å†³æ–¹æ¡ˆ</h2><p>githubä¸Šå·²ç»æœ‰å®Œç¾çš„è½®å­äº†ï¼Œæ²¡å¿…è¦åœ¨è‡ªå·±é€ è½®å­äº†ï¼Œå…¥å£<a href="https://github.com/jasenhuang/NSObjectSafe" target="_blank" rel="noopener">NSObjectSafe</a> æ€è·¯ä¸€æ ·ï¼Œå®ç°çš„æ›´ä¼˜é›…å®Œç¾ ğŸ ğŸ ğŸ ğŸ ğŸ</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/03/pythonè¯»å–Excelæ–‡ä»¶/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/01/03/pythonè¯»å–Excelæ–‡ä»¶/" itemprop="url">pythonå¤„ç†Excelæ–‡ä»¶</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2017-01-03T21:43:23+08:00">
                2017-01-03
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="pythonçš„é¢˜å¤–è¯å•Š"><a href="#pythonçš„é¢˜å¤–è¯å•Š" class="headerlink" title="pythonçš„é¢˜å¤–è¯å•Š"></a>pythonçš„é¢˜å¤–è¯å•Š</h4><p>é¢˜å¤–è¯ï¼Œè¿™ä¸ªéœ€æ±‚æ¥è‡ªäºè€å©†å¤§äººğŸ™ ï¼Œæœ¬æ¥ä¹Ÿå°±æƒ³å­¦ä¹ pythonï¼Œåˆšå¥½æœ‰äº†åŠ¨åŠ›ğŸ˜‚.é¡¹ç›®APPç˜¦èº«åˆšå¥½èƒ½ç”¨åˆ°python</p>
<h4 id="pythonç¯å¢ƒ"><a href="#pythonç¯å¢ƒ" class="headerlink" title="pythonç¯å¢ƒ"></a>pythonç¯å¢ƒ</h4><p> Macè‡ªå¸¦çš„pythonç¯å¢ƒï¼Œçœäº†å®‰è£…è¿‡ç¨‹ï¼Œåœ¨ç»ˆç«¯è¾“å…¥pythonå³å¯æŸ¥çœ‹ã€‚<br> æ¨èæ¯”è¾ƒå¥½ç”¨çš„é›†æˆå¼€å‘ç¯å¢ƒï¼š<a href="https://www.jetbrains.com/pycharm/download/" target="_blank" rel="noopener">PyCharm</a> </p>
<h4 id="è¯­æ³•åŸºç¡€"><a href="#è¯­æ³•åŸºç¡€" class="headerlink" title="è¯­æ³•åŸºç¡€"></a>è¯­æ³•åŸºç¡€</h4><p> pythonçš„åŸºæœ¬æ•°æ®ç±»å‹ï¼š</p>
<ul>
<li>Numbersï¼ˆæ•°å­—ï¼‰</li>
<li>Stringï¼ˆå­—ç¬¦ä¸²ï¼‰</li>
<li>Listï¼ˆåˆ—è¡¨ï¼‰</li>
<li>Tupleï¼ˆå…ƒç»„ï¼‰</li>
<li>Dictionaryï¼ˆå­—å…¸ï¼‰<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">textNum = <span class="number">100</span></span><br><span class="line"></span><br><span class="line">testStr = <span class="string">"hahaha"</span></span><br><span class="line"></span><br><span class="line">testList = [<span class="number">1</span>,<span class="number">2</span>,<span class="string">"hehe"</span>]</span><br><span class="line"></span><br><span class="line">testTuple = (<span class="number">1</span>,<span class="string">"3"</span>,<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">testDic = &#123;<span class="string">"niu"</span>:<span class="number">123</span>,<span class="string">"ha"</span>:<span class="string">"hehe"</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span>  textNum,testStr,testList,testTuple,testDic</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>ç±»å‹å’Œswifté‡Œçš„åŸºæœ¬ä¸€è‡´ï¼Œæ–¹ä¾¿ä½¿ç”¨çš„æ˜¯ä¸ç”¨å£°æ˜ç±»å‹</p>
<h3 id="æµç¨‹æ§åˆ¶è¯­å¥"><a href="#æµç¨‹æ§åˆ¶è¯­å¥" class="headerlink" title="æµç¨‹æ§åˆ¶è¯­å¥"></a>æµç¨‹æ§åˆ¶è¯­å¥</h3><p>python çš„ä»£ç å—ä¸ä½¿ç”¨å¤§æ‹¬å· {} æ¥æ§åˆ¶ç±»ï¼Œå‡½æ•°ä»¥åŠå…¶ä»–é€»è¾‘åˆ¤æ–­ã€‚python æœ€å…·ç‰¹è‰²çš„å°±æ˜¯ç”¨ç¼©è¿›æ¥å†™æ¨¡å—ã€‚ å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">printme</span><span class="params">( str )</span>:</span></span><br><span class="line">   <span class="string">"æ‰“å°ä»»ä½•ä¼ å…¥çš„å­—ç¬¦ä¸²"</span></span><br><span class="line">   <span class="keyword">print</span> str;</span><br><span class="line">   <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span>  printme(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æµç¨‹æ§åˆ¶è¯­å¥</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">True</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"True"</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"false"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="keyword">False</span>):</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"haha"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> obj <span class="keyword">in</span> [<span class="string">"niu"</span>,<span class="string">"xian"</span>,<span class="string">"bin"</span>]:</span><br><span class="line">    <span class="keyword">print</span> obj</span><br></pre></td></tr></table></figure></p>
<h4 id="python-å¤„ç†æ–‡ä»¶"><a href="#python-å¤„ç†æ–‡ä»¶" class="headerlink" title="python å¤„ç†æ–‡ä»¶"></a>python å¤„ç†æ–‡ä»¶</h4><p>pythonåŸºç¡€å¾ˆå®¹æ˜“ï¼Œç°åœ¨å¼€å§‹å®æˆ˜äº†ã€‚è¯»å–å’Œå†™å…¥éœ€è¦ä¾èµ–ä¸‰ä¸ªç¬¬ä¸‰æ–¹åº“ï¼š<a href="https://pypi.python.org/pypi/xlwt" target="_blank" rel="noopener">xlwt</a> ï¼Œ<a href="https://pypi.python.org/pypi/xlrd" target="_blank" rel="noopener">xlrd</a> , xlutilsï¼Œå®‰è£…è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•ï¼Œç½‘ä¸Šå¾ˆå¤šã€‚<br>åª³å¦‡çš„å…·ä½“éœ€æ±‚æ˜¯ä¸¤ä¸ªsheetè¡¨ï¼ŒæŠŠæ—©é€€äººå‘˜çš„åŸå› æ ¹æ®ç¬¬äºŒè¡¨æ‰“å¡æ—¶é—´åˆ†æå‡ºæ¥<br>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> xlrd</span><br><span class="line"><span class="keyword">import</span> xlwt</span><br><span class="line"><span class="keyword">from</span> xlutils.copy <span class="keyword">import</span> copy</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"><span class="comment">#ä¹±ç é—®é¢˜è§£å†³</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"></span><br><span class="line">fname = <span class="string">"123.xlsx"</span></span><br><span class="line">bk = xlrd.open_workbook(fname)</span><br><span class="line"><span class="comment">#copyä¸€ä»½ç”¨æ¥å†™å…¥æ•°æ®</span></span><br><span class="line">newb = copy(bk)</span><br><span class="line">shxrange = range(bk.nsheets)</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    Sheet1 = bk.sheet_by_name(<span class="string">"Sheet1"</span>)</span><br><span class="line">    Sheet2 = bk.sheet_by_name(<span class="string">"Sheet2"</span>)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"no sheet in %s named Sheet1"</span> % fname</span><br><span class="line"><span class="comment"># è·å–è¡Œæ•°</span></span><br><span class="line">nrows = Sheet1.nrows</span><br><span class="line"><span class="comment"># è·å–åˆ—æ•°</span></span><br><span class="line">ncols = Sheet1.ncols</span><br><span class="line"><span class="keyword">print</span> <span class="string">"sheet1:nrows %d, ncols %d"</span> % (nrows, ncols)</span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–è¡Œæ•°</span></span><br><span class="line">nrows2 = Sheet2.nrows</span><br><span class="line"><span class="comment"># è·å–åˆ—æ•°</span></span><br><span class="line">ncols2 = Sheet2.ncols</span><br><span class="line"><span class="keyword">print</span> <span class="string">"sheet2:nrows %d, ncols %d"</span> % (nrows2, ncols2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#-------sheet1----------</span></span><br><span class="line"><span class="comment">#äººå‘˜åˆ—è¡¨</span></span><br><span class="line">peopleList = Sheet1.col_values(<span class="number">0</span>)</span><br><span class="line"><span class="comment">#æ—©é€€æ—¶é—´</span></span><br><span class="line">lltimeList = Sheet1.col_values(<span class="number">4</span>)</span><br><span class="line"><span class="comment"># è·å–æ—©é€€çš„äººå‘˜åˆ—</span></span><br><span class="line">listValue = Sheet1.col_values(<span class="number">9</span>)</span><br><span class="line"><span class="comment">#å­˜å‚¨æ—©é€€äººå‘˜ç›¸å…³ä¿¡æ¯</span></span><br><span class="line">zauotuiList = []</span><br><span class="line"></span><br><span class="line"><span class="comment">#-------sheet2----------</span></span><br><span class="line">people2List = Sheet2.col_values(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">lltime2List = Sheet2.col_values(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å†™å…¥æ—©é€€åŸå› </span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">excelUpdate</span><span class="params">(excel,row,content)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    æ›´æ–°å·²æœ‰excel, æ˜¯copyä¸€ä»½å†åšæ›´æ–°</span></span><br><span class="line"><span class="string">    :param excel:</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    wbsheet = newb.get_sheet(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    wbsheet.write(row, <span class="number">10</span>, content)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> index <span class="keyword">in</span> range(len(listValue)):</span><br><span class="line">     <span class="keyword">if</span> (<span class="string">"æ—©é€€"</span> <span class="keyword">in</span> listValue[index]):</span><br><span class="line">        peoplename = peopleList[index]</span><br><span class="line">        <span class="keyword">for</span> peopleindex <span class="keyword">in</span> range(len(people2List)):</span><br><span class="line">            <span class="keyword">if</span> (peoplename == people2List[peopleindex]):</span><br><span class="line">             <span class="comment">#   print  lltime2List[peopleindex][2:(lltime2List[peopleindex].index(" "))],lltimeList[index][0:(lltimeList[index].index(" "))]</span></span><br><span class="line">                <span class="keyword">if</span> ((lltime2List[peopleindex][<span class="number">2</span>:(lltime2List[peopleindex].index(<span class="string">" "</span>))] == lltimeList[index][<span class="number">0</span>:(lltimeList[index].index(<span class="string">" "</span>))]) <span class="keyword">and</span> lltime2List[peopleindex][<span class="number">11</span>:<span class="number">13</span>] &gt;=<span class="number">16</span> ):</span><br><span class="line">                   <span class="comment"># print "æ—©é€€äººå‘˜åå­—ï¼š%s æ—¥æœŸï¼š%s å½“å¤©ç›´æ’­æ—¶é—´: %s" % (peoplename,lltimeList[index],lltime2List[peopleindex])</span></span><br><span class="line">                    excelUpdate(newb,index,unicode(<span class="string">"æ™šä¸Šæœ‰ç›´æ’­"</span>, <span class="string">"utf8"</span>))</span><br><span class="line">                   <span class="comment"># print  lltime2List[peopleindex][11:13]</span></span><br><span class="line">                <span class="comment"># print lltime2List[peopleindex],people2List[peopleindex]</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">         <span class="comment"># if peopleList[index] ==</span></span><br><span class="line">         <span class="comment"># print "%s %s %s" % (peopleList[index],listValue[index],lltimeList[index][0:(lltimeList[index].index(" "))])</span></span><br><span class="line">         </span><br><span class="line"><span class="comment">#ç”Ÿæˆæ–°çš„Excelæ–‡ä»¶å­˜å‚¨ç£ç›˜</span></span><br><span class="line">newb.save(<span class="string">"123456.xlsx"</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="ç»“å°¾"><a href="#ç»“å°¾" class="headerlink" title="ç»“å°¾"></a>ç»“å°¾</h4><p>å­¦ä¹ æ–°è¯­è¨€åŸºç¡€å¾ˆç®€å•ï¼Œä½†æ˜¯çœŸæ­£ä½¿ç”¨è¿˜æ˜¯ä¼šé‡åˆ°å„ç§é—®é¢˜ï¼Œä½†æ˜¯åœ¨å®è·µä¸­æ‰èƒ½å­¦çš„æ›´å¿«ã€‚ğŸğŸåæœŸæ‰“ç®—è‡ªå·±å†™APPç˜¦èº«è„šæœ¬ï¼Œfightingï¼Œæ„Ÿè°¢æ•°æ®éƒ¨å¤§ç¥@å¸é©¬æŒ‡ç‚¹</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/12/25/GCDçº¿ç¨‹åŒæ­¥/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/12/25/GCDçº¿ç¨‹åŒæ­¥/" itemprop="url">GCDçº¿ç¨‹åŒæ­¥</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-12-25T22:33:43+08:00">
                2016-12-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/11/23/atomicå’Œçº¿ç¨‹å®‰å…¨/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/11/23/atomicå’Œçº¿ç¨‹å®‰å…¨/" itemprop="url">atomicå’Œçº¿ç¨‹å®‰å…¨</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-11-23T20:13:02+08:00">
                2016-11-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="ä¿®é¥°è¯"><a href="#ä¿®é¥°è¯" class="headerlink" title="ä¿®é¥°è¯"></a>ä¿®é¥°è¯</h2><p> ä¸€èˆ¬æˆ‘ä»¬å†™å±æ€§éƒ½æ˜¯nonatomic,è¿™ä¸ªå±æ€§æ•ˆç‡é«˜ï¼Œä½†æ˜¯ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¤šçº¿ç¨‹é€ ä½œä¼šé€ æˆcrashé—®é¢˜ï¼Œæ‰€ä»¥æœ‰äº†atomicï¼Œatomicæ˜¯å¯¹setter/getteræ–¹æ³•æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œä¸ä»£è¡¨è¿™ä¸ªå±æ€§çš„æ“ä½œæ˜¯çº¿ç¨‹å®‰å…¨çš„<br>ï¼Œç¬”è€…æ·±æœ‰ä½“ä¼šï½ï½<br>å¦‚ä¸‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@property(atomic,strong) NSMutableArray *arrayM;</span><br></pre></td></tr></table></figure></p>
<p>å¯¹äºè¿™ä¸ªå±æ€§åªèƒ½ä¿è¯self.arrayMè¿™æ ·è°ƒç”¨æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œ[self.arrayM addObject:];è¿™æ ·ä½¿ç”¨å¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨ï¼Œå¦‚æœæœ‰å¤šçº¿ç¨‹è®¿é—®ï¼Œè¿˜æ˜¯å¯èƒ½ä¼šcrashçš„ï¼Œæ­¤å¤„åªæœ‰é€šè¿‡é”æ¥è§£å†³ï¼Œ</p>
<p>stackoverflowç»å…¸å…³äºatomicçš„è®²è§£<br><a href="https://stackoverflow.com/questions/588866/whats-the-difference-between-the-atomic-and-nonatomic-attributes" target="_blank" rel="noopener">Whatâ€™s the difference between the atomic and nonatomic attributes?</a>  </p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/10/26/GCDå»¶è¿Ÿæ“ä½œ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/10/26/GCDå»¶è¿Ÿæ“ä½œ/" itemprop="url">iOSå»¶è¿Ÿæ‰§è¡Œ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-10-26T20:31:15+08:00">
                2016-10-26
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="å»¶æ—¶æ‰§è¡Œ"><a href="#å»¶æ—¶æ‰§è¡Œ" class="headerlink" title="å»¶æ—¶æ‰§è¡Œ"></a>å»¶æ—¶æ‰§è¡Œ</h2><p>æœ€è¿‘996ï¼Œä¸¤ä¸ªæ–°é¡¹ç›®åŠ ç ï¼Œåšå®¢è¶Šæ¥è¶Šæ…¢äº†ã€‚è®°å½•ä¸‹è‡ªå·±é¡¹ç›®çš„æ³¨æ„ç‚¹ã€‚è¨€å½’æ­£ä¼ ã€‚ä¸€èˆ¬å»¶è¿Ÿæ‰§è¡Œæœ€å¸¸ç”¨çš„ï¼š</p>
<ul>
<li>performSelector:withObject:afterDelay</li>
<li>NSTimer</li>
<li>dispatch_after<br>ä¸‰è€…çš„æœ‰ä½•ä¸åŒå’Œç›¸åŒç‚¹å‘¢ï¼Ÿ<br>performSelector:withObject:afterDelay æ˜¯åŸºäºrunloopå®ç°çš„ï¼Œæ‰€ä»¥è¿™ä¸ªä½¿ç”¨åº”è¯¥æ³¨æ„ï¼Œ!!!!åœ¨å­çº¿ç¨‹ä½¿ç”¨éœ€è¦å¼€å¯runloopã€‚å®˜ç½‘è§£é‡Š</li>
</ul>
<blockquote>
<p>This method sets up a timer to perform the aSelector message on the current threadâ€™s run loop. The timer is configured to run in the default mode (NSDefaultRunLoopMode). When the timer fires, the thread attempts to dequeue the message from the run loop and perform the selector. It succeeds if the run loop is running and in the default mode; otherwise, the timer waits until the run loop is in the default mode</p>
</blockquote>
<p>å…¶å®è¿™ä¸ªæ˜¯ç³»ç»Ÿåº•å±‚åˆ›å»ºä¸€ä¸ªtimerï¼Œè¯´åˆ°åº•è¿™ä¸ªæ˜¯å¯ä»¥NStimerå®ç°çš„å»¶æ—¶æ–¹æ³•ï¼Œ<br>è¿™ä¸ªå»¶æ—¶å¯ä»¥å–æ¶ˆï¼Œç³»ç»Ÿæä¾›ä¸¤ä¸ªå¯ä»¥å–æ¶ˆæ“ä½œçš„æ–¹æ³•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget selector:(SEL)aSelector object:(nullable id)anArgument;</span><br><span class="line">+ (void)cancelPreviousPerformRequestsWithTarget:(id)aTarget;</span><br></pre></td></tr></table></figure></p>
<p>NStimerä¹Ÿæ˜¯åŸºäºrunloopï¼Œä½¿ç”¨éœ€è¦åŠ å…¥runloopï¼Œå› æ­¤ä¹Ÿå­˜åœ¨å­çº¿ç¨‹ä½¿ç”¨å¯èƒ½å‡ºç°é—®é¢˜ï¼ˆtimerçš„ä¹Ÿå¯èƒ½äº§ç”Ÿå¾ªç¯å¼•ç”¨é—®é¢˜ä¹Ÿè¦æ³¨æ„ï¼‰<br>ä»¥ä¸Šä¸¤ä¸ªçš„å¥½å¤„å°±æ˜¯éƒ½èƒ½å–æ¶ˆï¼Œ</p>
<h2 id="dispatch-after"><a href="#dispatch-after" class="headerlink" title="dispatch_after"></a>dispatch_after</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//ä½¿ç”¨æ–¹å¼</span><br><span class="line"> dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(5 * NSEC_PER_SEC)), dispatch_queue_create(0, 0), ^&#123;</span><br><span class="line">        NSLog(@&quot;...dispatch_after...&quot;);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>å®˜ç½‘è§£é‡Š</p>
<blockquote>
<p>This function waits until the specified time and then<br>asynchronously adds block to the specified queue.</p>
</blockquote>
<p>æ„æ€å°±æ˜¯è¿™ä¸ªæ˜¯å»¶è¿Ÿæäº¤ï¼Œå°±æ˜¯å»¶æ—¶åæŠŠblockæäº¤åˆ°åŠ å…¥é˜Ÿåˆ—çš„çš„çº¿ç¨‹ï¼Œè€Œä¸æ˜¯æäº¤åˆ°å¯¹åº”çš„çº¿ç¨‹å»¶è¿Ÿæ‰§è¡Œï¼Œå› æ­¤è¿™ä¸ªæ— æ³•å–æ¶ˆæ“ä½œã€‚</p>
<h2 id="å»¶è¿Ÿæ“ä½œå–æ¶ˆ"><a href="#å»¶è¿Ÿæ“ä½œå–æ¶ˆ" class="headerlink" title="å»¶è¿Ÿæ“ä½œå–æ¶ˆ"></a>å»¶è¿Ÿæ“ä½œå–æ¶ˆ</h2><p>[[NSRunLoop currentRunLoop] run]; ï¼šå¼€å§‹è¿è¡Œå¾ªç¯<br>å¼€å¯å¾ªç¯ä¹‹å‰ï¼Œå¿…é¡»æœ‰å®šæ—¶æºæˆ–è€…è¾“å…¥æºç»™ä»–ï¼Œä¸ç„¶runloopè¿è¡Œå®Œä¼šé€€å‡ºã€‚<br>performSelector:withObject:afterDelay è¿™ä¸ªæ–¹æ³•åº•å±‚åˆ›å»ºçš„timerï¼ŒNStimerä¹Ÿæ˜¯timerï¼Œä½†æ˜¯éœ€è¦æ‰‹åŠ¨åŠ å…¥è¿è¡Œå¾ªç¯ï¼Œé€šè¿‡æ‰“runloopæœ‰ä½•ä¸åŒ,æ¥è§‚å¯Ÿcancleæ“ä½œæ€ä¹ˆå®ç°åŸç†ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line">        [[NSRunLoop currentRunLoop ] run];</span><br><span class="line">        NSLog(@&quot;0:%@&quot;,[NSRunLoop currentRunLoop]);</span><br><span class="line">        [self performSelector:@selector(test) withObject:nil afterDelay:2.0];</span><br><span class="line">        NSLog(@&quot;1:%@&quot;,[NSRunLoop currentRunLoop]);</span><br><span class="line">        [self performSelector:@selector(test) withObject:nil afterDelay:4.0];</span><br><span class="line">        NSLog(@&quot;2:%@&quot;,[NSRunLoop currentRunLoop]);</span><br><span class="line">        [self performSelector:@selector(test) withObject:nil afterDelay:4.0];</span><br><span class="line">        NSLog(@&quot;3:%@&quot;,[NSRunLoop currentRunLoop]);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
<p>å› ä¸ºæœ‰å¾ˆå¤šå±æ€§ï¼Œæˆªå›¾ä¸æ–¹ä¾¿ï¼Œæˆ‘å°±æ‰‹åŠ¨å¤åˆ¶äº†logæ—¥å¿—ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0 :timers = (null),</span><br><span class="line">1 :timers = &lt;CFArray 0x6040000af180 [0x1053dcbb0]&gt;&#123;type = mutable-small, count = 1, values = (...</span><br><span class="line">2 :timers = &lt;CFArray 0x6040000af180 [0x1053dcbb0]&gt;&#123;type = mutable-small, count = 2, values = (...</span><br><span class="line">3 :timers = &lt;CFArray 0x6040000af180 [0x1053dcbb0]&gt;&#123;type = mutable-small, count = 3, values = (...</span><br></pre></td></tr></table></figure></p>
<p>ä»¥ä¸ŠåŸç†ï¼štimeræ˜¯æ”¾åˆ°runloopçš„ timersæ•°ç»„ä¸­äº†ï¼Œåœ¨runloop runçš„æ—¶å€™Observeræ‰§è¡Œtimersçš„timerã€‚<br>å–æ¶ˆçš„æ–¹å¼å°±æ˜¯åœ¨runloop runä¹‹å‰æŠŠtimerå–æ¶ˆäº†:<br><img src="/img/6.png" alt=""><br>å¼€å‘è€…æ–‡æ¡£å¯¹cancleçš„è§£é‡Šï¼šå°±æ˜¯å–æ¶ˆçš„æ˜¯ä¸‹ä¸€æ¬¡çš„ next run loop cycle çš„timerï¼Œä»¥ä¸‹ä»£ç çš„testæ–¹æ³•æ‰§è¡Œæ¬¡æ•°ç»“æœå°±æ¸…æ™°æ˜äº†äº†ï¼š3æ¬¡å’Œ1æ¬¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line">        </span><br><span class="line">        for (int i=0; i&lt;3 ; i++) &#123;</span><br><span class="line">            [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(test) object:nil];</span><br><span class="line">            [self performSelector:@selector(test) withObject:nil afterDelay:1];</span><br><span class="line">              [[NSRunLoop currentRunLoop] run];</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">    &#125;);</span><br><span class="line">    dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;</span><br><span class="line">        </span><br><span class="line">        for (int i=0; i&lt;3 ; i++) &#123;</span><br><span class="line">            [NSObject cancelPreviousPerformRequestsWithTarget:self selector:@selector(test) object:nil];</span><br><span class="line">            [self performSelector:@selector(test) withObject:nil afterDelay:1];</span><br><span class="line">        &#125;</span><br><span class="line">        [[NSRunLoop currentRunLoop] run];</span><br><span class="line">        </span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/09/18/iOSç¼–ç è§„èŒƒ-äºŒ/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/09/18/iOSç¼–ç è§„èŒƒ-äºŒ/" itemprop="url">iOSç¼–ç è§„èŒƒ-associated_key</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-09-18T21:42:37+08:00">
                2016-09-18
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å­¦ä¹ ç¬¬ä¸‰æ–¹æºç æ—¶å‘ç°associated_keyçš„èŠ±å¼å†™æ³•</p>
<h4 id="å¸¸è§„å¥—è·¯-NSString"><a href="#å¸¸è§„å¥—è·¯-NSString" class="headerlink" title="å¸¸è§„å¥—è·¯-NSString"></a>å¸¸è§„å¥—è·¯-NSString</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">objc_setAssociatedObject(vc, @&quot;objKey&quot;, @&quot;123&quot;, OBJC_ASSOCIATION_ASSIGN);</span><br></pre></td></tr></table></figure>
<h4 id="å˜é‡çš„é™æ€å†…å­˜åœ°å€"><a href="#å˜é‡çš„é™æ€å†…å­˜åœ°å€" class="headerlink" title="å˜é‡çš„é™æ€å†…å­˜åœ°å€"></a>å˜é‡çš„é™æ€å†…å­˜åœ°å€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// æŒ‡å‘å­—ç¬¦ä¸²çš„åœ°å€</span><br><span class="line">static char * JORAutoScrollAssociatedKeyController = &quot;JORAutoScrollAssociatedKeyController&quot;;</span><br><span class="line">objc_setAssociatedObject(self, JORAutoScrollAssociatedKeyController, scrollController, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">// æŒ‡å‘è‡ªå·±çš„åœ°å€</span><br><span class="line">static void * eventAssociatedKey = &amp;eventAssociatedKey;</span><br><span class="line">objc_setAssociatedObject(self, eventAssociatedKey, delegate, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br></pre></td></tr></table></figure>
<h4 id="é»˜è®¤åˆå§‹åŒ–çš„å˜é‡-å¸¸é‡åœ°å€"><a href="#é»˜è®¤åˆå§‹åŒ–çš„å˜é‡-å¸¸é‡åœ°å€" class="headerlink" title="é»˜è®¤åˆå§‹åŒ–çš„å˜é‡/å¸¸é‡åœ°å€"></a>é»˜è®¤åˆå§‹åŒ–çš„å˜é‡/å¸¸é‡åœ°å€</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// SDWebImage</span><br><span class="line">static char imageURLKey;</span><br><span class="line">objc_setAssociatedObject(self, &amp;imageURLKey, url, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">objc_getAssociatedObject(self, &amp;imageURLKey);</span><br><span class="line"></span><br><span class="line">// YYAdd</span><br><span class="line">static const int block_key;</span><br><span class="line">objc_setAssociatedObject(self, &amp;block_key, target, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">objc_getAssociatedObject(self, &amp;block_key);</span><br></pre></td></tr></table></figure>
<p>####selectorçš„åœ°å€<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// AFNetWorking:ä½¿ç”¨ @selector</span><br><span class="line">- (AFImageDownloadReceipt *)af_activeImageDownloadReceipt &#123;</span><br><span class="line">    return (AFImageDownloadReceipt *)objc_getAssociatedObject(self, @selector(af_activeImageDownloadReceipt));</span><br><span class="line">&#125;</span><br><span class="line">- (void)af_setActiveImageDownloadReceipt:(AFImageDownloadReceipt *)imageDownloadReceipt &#123;</span><br><span class="line">    objc_setAssociatedObject(self, @selector(af_activeImageDownloadReceipt), imageDownloadReceipt, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>å…¶å®@selectorï¼Œå°±æ˜¯æ–¹æ³•æœ¬èº«çš„éšè—å‚æ•°_cmdï¼Œä¸¤è€…æ˜¯ä¸€æ ·çš„ã€‚</p>
<p>####&#x1F34E;ç»“å°¾&#x1F34E;<br>èåœç™½èœï¼Œä¸ªæœ‰æ‰€çˆ±ï¼Œæˆ‘è¿˜æ˜¯å–œæ¬¢é»˜è®¤å€¼çš„æ–¹å¼</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/08/21/iOSç¼–ç è§„èŒƒ-ä¸€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/08/21/iOSç¼–ç è§„èŒƒ-ä¸€/" itemprop="url">iOSç¼–ç è§„èŒƒæ–°ç‰¹æ€§</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-08-21T21:42:11+08:00">
                2016-08-21
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å¼€å‘è€…é—®é¢˜æŠ›å‡ºè¶Šæ—©è¶Šå®¹æ˜“åˆ†æè§£å†³é—®é¢˜ï¼Œç¼–è¯‘é˜¶æ®µèƒ½ç»™å‡ºæç¤ºwarningï¼Œè¿œä¼˜äºè¿è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸æˆ–è€…é”™è¯¯ã€‚å› æ­¤æˆ‘ä»¬è¦ç”¨å¥½è‹¹æœå¤§å¤§ç»™æç¤º~~~~</p>
<h4 id="attribute-å’ŒNS-UNAVAILABLE"><a href="#attribute-å’ŒNS-UNAVAILABLE" class="headerlink" title="attribute()å’ŒNS_UNAVAILABLE"></a><strong>attribute</strong>()å’ŒNS_UNAVAILABLE</h4><p>å¼€å‘è€…ï¼Œæ¯ä¸ªäººè´Ÿè´£çš„æ¨¡å—ä¸ä¸€æ ·ï¼Œä½†æ˜¯æ¨¡å—çš„åˆå§‹åŒ–æ–¹æ³•æœ‰å¾ˆå¤šï¼Œä½†æ˜¯å¿…é¡»åœ¨åˆå§‹åŒ–ä¼ å‚æ•°ï¼Œè¿™æ—¶å€™å¯ä»¥ä½¿ç”¨å¦‚ä¸Šä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸‰æ–¹å¥½å¤šè¿™ä¹ˆç”¨çš„å“¦ï½ï½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(instancetype)new NS_UNAVAILABLE;</span><br><span class="line">-(instancetype)init __attribute__((unavailable(&quot;è¯·ç”¨initWithID:&quot;)));</span><br><span class="line">-(instancetype)initWithID:(NSNumber*)number;</span><br></pre></td></tr></table></figure></p>
<h4 id="Nullability-OCçš„æ–°ç‰¹æ€§"><a href="#Nullability-OCçš„æ–°ç‰¹æ€§" class="headerlink" title="Nullability OCçš„æ–°ç‰¹æ€§"></a>Nullability OCçš„æ–°ç‰¹æ€§</h4><p>å»å¹´çš„swift2.0åï¼ŒOCä¹Ÿæœ‰äº†ä¸€äº›å¯¹åº”çš„æ–°ç‰¹æ€§ã€‚è¿™ç”¨æ¥è¡¨ç¤ºä¸€äº›éç©ºçš„å±æ€§<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@property (nonatomic, strong, nonnull) TestObj *Obj;</span><br></pre></td></tr></table></figure></p>
<p>è¿˜æœ‰_nullable / nullable ã€ __nonnull / nonnull ã€ NS_ASSUME_NONNULL_BEGIN NS_ASSUME_NONNULL_ENDç­‰æ¥è¡¨ç¤ºæ–¹æ³•çš„è¿”å›å€¼ï¼å‚æ•° &amp; ç±»å±æ€§ æ˜¯å¦å¯ä»¥ä¸ºç©ºï¼ŒNullability åœ¨ç¼–è¯‘å™¨å±‚é¢æä¾›äº†ç©ºå€¼çš„ç±»å‹æ£€æŸ¥ï¼Œåœ¨ç±»å‹ä¸ç¬¦æ—¶ç»™å‡º warning</p>
<h4 id="kindof"><a href="#kindof" class="headerlink" title="__kindof"></a>__kindof</h4><p>åˆ¤æ–­æŸå¯¹è±¡æ˜¯å¦æ˜¯æŸç±»å‹æˆ–å…¶å­ç±»å‹ï¼Œé‡ç‚¹æ˜¯å¯ä»¥å–æ¶ˆçˆ¶ç±»è½¬æ¢ä¸ºå­ç±»æ—¶çš„warningã€‚å¦‚ä¸‹çš„ç”¨æ³•å°±ä¼šèŠ‚çœç±»å‹è½¬åŒ–ä»£ç ï¼Œç¦éŸ³å•Š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- (__kindof UITableViewCell *)dequeueReusableCellWithIdentifier:(NSString *)identifier;</span><br></pre></td></tr></table></figure></p>
<h4 id="NS-DESIGNATED-INITIALIZER"><a href="#NS-DESIGNATED-INITIALIZER" class="headerlink" title="NS_DESIGNATED_INITIALIZER"></a>NS_DESIGNATED_INITIALIZER</h4><p>NS_DESIGNATED_INITIALIZERï¼Œå¯ä»¥ä½¿ç”¨å®ƒæ ‡å¿—å‡ºåƒ Swift ä¸€æ ·çš„æŒ‡å®šæ„é€ å™¨å’Œä¾¿æ·æ„é€ å™¨ï¼Œå®ƒç”¨æ¥æŒ‡å®šåˆå§‹åŒ–çš„æ–¹æ³•ã€‚å¦‚æœç±»ä¸­å…¶ä»–åˆå§‹åŒ–æ–¹æ³• å¿…é¡»è¦è°ƒç”¨Designated Initializerï¼Œå¦åˆ™æœ‰è­¦å‘Šã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithID:(NSNumber*)number;</span><br><span class="line">- (instancetype)initWithCard:(NSNumber *)Card;</span><br><span class="line">- (instancetype)initWithID:(NSNumber*)number Card:(NSNumber *)Card NS_DESIGNATED_INITIALIZER;</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/07/09/â€˜copyæ“ä½œé™·é˜±â€™/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="niuxianbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/upload/15234019.jpeg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="niuxianbinçš„æŠ€æœ¯åšå®¢">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/09/â€˜copyæ“ä½œé™·é˜±â€™/" itemprop="url">copyæ“ä½œé™·é˜±</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">å‘è¡¨äº</span>
              
              <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2016-07-09T20:32:49+08:00">
                2016-07-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="copyé™·é˜±"><a href="#copyé™·é˜±" class="headerlink" title="copyé™·é˜±"></a>copyé™·é˜±</h2><p>å’ŒåŒäº‹äº¤æµé—®é¢˜ï¼Œå‘ç°ç®€å•çš„ä¹Ÿå¯èƒ½ç†è§£é”™ï¼Œå¦‚ä¸‹è¿™æ®µä»£ç å°±æ˜¯ä¾‹å­ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary &lt;NSString *, Model *&gt; *dicTemp = @&#123;@&quot;model&quot;:[[Model alloc] initWithName:@&quot;niuxianbin&quot;]&#125;;</span><br><span class="line">    NSDictionary &lt;NSString *, Model *&gt; *dicCopy = dic.copy;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    [dic objectForKey:@&quot;model&quot;].name = @&quot;123&quot;;</span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">    BOOL isNameChanged = [[dic objectForKey:@&quot;model&quot;].name isEqualToString:[dicBackup objectForKey:@&quot;model&quot;].name];</span><br><span class="line">    </span><br><span class="line">    if (isNameChanged) &#123;</span><br><span class="line">        NSLog(@&quot;changed&quot;);</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        NSLog(@&quot;unchaned&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>åˆšå¼€å§‹æˆ‘è§‰å¾—changedï¼Œåæ¥ç»†æƒ³é”™äº†ï¼Œä½ çŸ¥é“é”™å“ªäº†å—ï¼Ÿ<br>æ•²é»‘æ¿ï¼šæ·±copyå’Œæµ…copyç†è§£ä¸åˆ°ä½ï¼Œ</p>
<h2 id="å®˜æ–¹æ–‡æ¡£è§£é‡Š"><a href="#å®˜æ–¹æ–‡æ¡£è§£é‡Š" class="headerlink" title="å®˜æ–¹æ–‡æ¡£è§£é‡Š"></a>å®˜æ–¹æ–‡æ¡£è§£é‡Š</h2><p> Shallow copies and deep copieså›¾ç¤ºï¼š<br><img src="/img/2.png" alt=""></p>
<p>####copyå¯¹äºéå®¹å™¨ç±»å¯¹è±¡<br>è¿™é‡ŒæŒ‡çš„æ˜¯NSString,NSNumberç­‰ç­‰ä¸€ç±»çš„å¯¹è±¡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSString *string = @&quot;origionStr&quot;;</span><br><span class="line">    ã€€ã€€NSString *stringCopy = [string copy];</span><br><span class="line">    ã€€ã€€NSMutableString *stringMCopy = [string mutableCopy];</span><br><span class="line">    ã€€ã€€[stringMCopy appendString:@&quot;123&quot;];</span><br></pre></td></tr></table></figure></p>
<p><img src="/img/3.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSMutableString *string = @&quot;origionStr&quot;.mutableCopy;</span><br><span class="line">    ã€€ã€€NSString *stringCopy = [string copy];</span><br><span class="line">    ã€€ã€€NSMutableString *stringMCopy = [string mutableCopy];</span><br><span class="line">    ã€€ã€€[stringMCopy appendString:@&quot;123&quot;];</span><br></pre></td></tr></table></figure></p>
<p><img src="/img/4.png" alt=""><br>å¯¹äºç»“æœåˆ†æå¯çŸ¥ï¼š<br>copyå¯¹äºåŸºæœ¬å¯¹è±¡æœ‰ä¸¤æ¡æ€»ç»“ï¼š</p>
<ul>
<li>å¯¹äºä¸å¯å˜å¯¹è±¡ï¼Œcopyï¼ˆæµ…copyï¼‰æ˜¯æŒ‡é’ˆå¤åˆ¶ï¼ŒmutableCopyï¼ˆæ·±æ‹·è´ï¼‰æ˜¯å¯¹è±¡å¤åˆ¶ã€‚</li>
<li>å¯¹äºå¯å˜å¯¹è±¡ï¼Œcopyï¼ˆæµ…copyï¼‰æ˜¯å¯¹è±¡å¤åˆ¶ï¼Œä½†æ˜¯è¿”å›çš„æ˜¯ä¸å¯å˜å¯¹è±¡ï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆcopyä¿®é¥°è¯ä¿®é¥°å¯å˜æ•°ç»„å¯èƒ½ä¼šé€ æˆcrashçš„æ ¹æœ¬åŸå› ï¼‰ï¼ŒmutableCopyï¼ˆæ·±æ‹·è´ï¼‰æ˜¯å¯¹è±¡å¤åˆ¶ã€‚<br>####copyå¯¹äºå®¹å™¨ç±»å¯¹è±¡<br>å…³äºå®¹å™¨å¯¹è±¡çš„æµ…copyã€‚Appleæœ‰å¦‚ä¸‹è§£é‡Š</li>
</ul>
<blockquote>
<p>There are a number of ways to make a shallow copy of a collection. When you create a shallow copy, the objects in the original collection are sent a retain message and the pointers are copied to the new collection. Listing 1 shows some of the ways to create a new collection using a shallow copy.</p>
</blockquote>
<p>æ„æ€å°±æ˜¯å®¹å™¨å¯¹è±¡çš„å¼•ç”¨è®¡æ•°+1ï¼ŒåŒæ—¶å¤åˆ¶äº†æŒ‡é’ˆã€‚<br>æ —å­å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NSArray *shallowCopyArray = [someArray copyWithZone:nil];</span><br><span class="line"> </span><br><span class="line">NSDictionary *shallowCopyDict = [[NSDictionary alloc] initWithDictionary:someDictionary copyItems:NO];</span><br></pre></td></tr></table></figure></p>
<p>å…³äºå®¹å™¨å¯¹è±¡çš„æ·±copyï¼ŒæŠŠç¬¬äºŒä¸ªå‚æ•°è®¾ç½®ä¸ºYESå°±OKäº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">NSArray *deepCopyArray=[[NSArray alloc] initWithArray:someArray copyItems:YES];</span><br><span class="line">//å®˜æ–¹è¿˜æœ‰ç¬¬äºŒä¸­æ–¹æ¡ˆ</span><br><span class="line">NSArray* trueDeepCopyArray = [NSKeyedUnarchiver unarchiveObjectWithData:</span><br><span class="line">          [NSKeyedArchiver archivedDataWithRootObject:oldArray]];</span><br></pre></td></tr></table></figure></p>
<p>æ­¤å¤„é›†åˆçš„å¯¹è±¡éƒ½ä¼šæ”¶åˆ°copyWithZoneï¼šçš„æ¶ˆæ¯ï¼Œå¦‚æœé›†åˆé‡Œçš„å¯¹è±¡éµå¾ª NSCopying åè®®ï¼Œé‚£ä¹ˆå¯¹è±¡å°±ä¼šè¢«æ·±å¤åˆ¶åˆ°æ–°çš„é›†åˆã€‚å¦‚æœå¯¹è±¡æ²¡æœ‰éµå¾ª NSCopying åè®®ï¼Œè€Œå°è¯•ç”¨è¿™ç§æ–¹æ³•è¿›è¡Œæ·±å¤åˆ¶ï¼Œä¼šåœ¨è¿è¡Œæ—¶å‡ºé”™ã€‚è¿™ç§æ‹·è´æ–¹å¼åªèƒ½å¤Ÿæä¾›ä¸€å±‚å†…å­˜æ‹·è´(one-level-deep copy)ï¼Œè€ŒéçœŸæ­£çš„æ·±å¤åˆ¶ã€‚</p>
<h4 id="copyå•å±‚æ·±å¤åˆ¶-one-level-deep-copy"><a href="#copyå•å±‚æ·±å¤åˆ¶-one-level-deep-copy" class="headerlink" title="copyå•å±‚æ·±å¤åˆ¶ (one-level-deep copy)"></a>copyå•å±‚æ·±å¤åˆ¶ (one-level-deep copy)</h4><p>å¦‚æœåœ¨å¤šå±‚æ•°ç»„ä¸­ï¼Œå¯¹ç¬¬ä¸€å±‚è¿›è¡Œå†…å®¹æ‹·è´ï¼Œå…¶å®ƒå±‚è¿›è¡ŒæŒ‡é’ˆæ‹·è´ï¼Œè¿™ç§æƒ…å†µæ˜¯å±äºæ·±å¤åˆ¶ï¼Œè¿˜æ˜¯æµ…å¤åˆ¶ï¼Ÿå®˜æ–¹æ–‡æ¡£æœ‰ä¸€æ®µè¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">This kind of copy is only capable of producing a one-level-deep copy. If you only need a one-level-deep copy...</span><br><span class="line"></span><br><span class="line">If you need a true deep copy, such as when you have an array of arrays...</span><br></pre></td></tr></table></figure></p>
<p>è‹¹æœè®¤ä¸ºè¿™ç§å¤åˆ¶ä¸æ˜¯çœŸæ­£çš„æ·±å¤åˆ¶ï¼Œè€Œæ˜¯å°†å…¶ç§°ä¸ºå•å±‚æ·±å¤åˆ¶(one-level-deep copy)<br>æ€»ç»“å¦‚ä¸‹ï¼š</p>
<ul>
<li>ä¸å¯å˜å®¹å™¨çš„copyæ˜¯æŒ‡é’ˆå¤åˆ¶ï¼ŒmutableCopyæ˜¯å¯¹è±¡å¤åˆ¶ï¼ˆæ­¤å¤„ä»…æ˜¯å¯¹è±¡copyï¼Œå†…éƒ¨å…ƒç´ æ˜¯æŒ‡é’ˆcopyï¼‰</li>
<li>å¯å˜å®¹å™¨çš„copyæ˜¯å¯¹è±¡å¤åˆ¶ï¼ˆè¿”å›ä¸å¯å˜å¯¹è±¡ï¼‰ï¼ŒmutableCopyæ˜¯å¯¹è±¡å¤åˆ¶ã€‚<br>å‚è€ƒï¼š<br>1 <a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Collections/Articles/Copying.html/" target="_blank" rel="noopener">https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Collections/Articles/Copying.html</a><br>2  <a href="http://blog.csdn.net/fanjunxi1990/article/details/16846393" target="_blank" rel="noopener">iOS Copy å’Œ MutableCopyçš„åŒºåˆ« æ·±æµ…æ‹·è´çš„åŒºåˆ«</a> </li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/upload/15234019.jpeg"
                alt="niuxianbin" />
            
              <p class="site-author-name" itemprop="name">niuxianbin</p>
              <p class="site-description motion-element" itemprop="description">å­œå­œä¸å€¦</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">æ—¥å¿—</span>
                </a>
              </div>
            

            

            

          </nav>

          

          <div class="links-of-author motion-element">
            
          </div>

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">niuxianbin</span>

  
</div>


  <div class="powered-by">ç”± <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> å¼ºåŠ›é©±åŠ¨</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">ä¸»é¢˜ &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.3</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  








  





  

  

  

  

  

  

</body>
</html>
